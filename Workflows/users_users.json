{
  "workflow": [
    {
      "name": "INITIAL",
      "auto": 1,
      "state": {
        "pre_checks": [

        ],
        "activities": [
          {
            "name": "register_new_users_user",
            "activity": "Daje::Workflow::Activities::Signup::User",
            "activity_data": {

            },
            "method": "signup",
            "resulting_state": "OPEN",
            "pre_checks": [
              {
                "name": "Mandatory fields",
                "class": "Daje::Workflow::Checks::Mandatory",
                "checks": "mail,password,active"
              },{
                "name": "Record already exists",
                "class": "Daje::Workflow::Checks::Exists",
                "checks": {
                  "fields": "mail",
                  "table": "users_users",
                  "err_text": "This user already exists, maybe you should try to change password instead ?"
                }
              }
            ],
            "post_checks":[],
            "auto": {
              "activity": "verify_users_user"
            },
            "observers": []
          },
          {
            "name": "save_users_user",
            "activity": "Daje::Workflow::Activities::Save",
            "activity_data": {
              "class": "Daje::Database::Model::UsersUsers"
            },
            "method": "save",
            "resulting_state": "OPEN",
            "pre_checks": [
              {
                "name": "Mandatory fields",
                "class": "Daje::Workflow::Checks::Mandatory",
                "checks": "Daje::Database::Model::UsersUsers"
              }
            ],
            "post_checks":[],
            "observers": []
          }
        ],
        "post_checks": [
          {
            "check": ""
          }
        ]
      }
    },
    {
      "name": "OPEN",
      "auto": 1,
      "state": {
        "pre_checks": [],
        "activities": [
          {
            "name": "save_users_user",
            "activity": "Daje::Workflow::Activities::Save",
            "activity_data": {
              "class": "Daje::Database::Model::UsersUsers"
            },
            "method": "save",
            "resulting_state": "OPEN",
            "pre_checks": [
              {
                "name": "Mandatory fields",
                "class": "Daje::Workflow::Checks::Mandatory",
                "checks": "Daje::Database::Model::UsersUsers"
              }
            ],
            "post_checks":[],
            "observers": []
          },
          {
            "name": "verify_users_user",
            "activity": "Daje::Workflow::Activities::Signup::User",
            "activity_data": {

            },
            "method": "verify",
            "resulting_state": "OPEN",
            "pre_checks": [
              {
                "name": "Mandatory fields",
                "class": "Daje::Workflow::Checks::Mandatory",
                "checks": "mail,"
              }
            ],
            "post_checks":[],
            "observers": []
          },
          {
            "name": "delete_users_user",
            "activity": "Daje::Workflow::Activities::Delete",
            "activity_data": {
              "class": "Daje::Database::Model::UsersUsers"
            },
            "method": "delete",
            "resulting_state": "OPEN",
            "pre_checks": [
              {
                "name": "Mandatory fields",
                "class": "Daje::Workflow::Checks::Mandatory",
                "checks": "users_users_pkey,"
              }
            ],
            "post_checks":[],
            "observers": []
          }
        ],
        "post_checks": [
          {
            "check": ""
          }
        ]
      }
    }
  ]
}
